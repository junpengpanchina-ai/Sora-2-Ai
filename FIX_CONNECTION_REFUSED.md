# 🔧 修复 ERR_CONNECTION_REFUSED 错误

## ✅ 服务器状态检查

经过检查，您的服务器实际上**正在正常运行**：
- ✅ 进程正在运行
- ✅ 端口 3000 正在监听
- ✅ HTTP 请求返回 200 OK

## 🔍 可能的原因

### 1. 访问了错误的端口
服务器运行在 **端口 3000**，请确保访问：
```
http://localhost:3000
```
而不是：
- ❌ `http://localhost:3001`
- ❌ `http://127.0.0.1:3001`

### 2. 浏览器缓存问题
浏览器可能缓存了错误的连接信息。

**解决方法**：
1. **清除浏览器缓存**
   - Chrome/Edge: `Ctrl+Shift+Del` (Windows) 或 `Cmd+Shift+Del` (Mac)
   - 或者使用无痕模式测试

2. **硬刷新页面**
   - Windows: `Ctrl+Shift+R` 或 `Ctrl+F5`
   - Mac: `Cmd+Shift+R`

### 3. 浏览器扩展或代理问题
某些浏览器扩展或代理设置可能阻止本地连接。

**解决方法**：
1. 尝试使用**无痕/隐私模式**
2. 禁用浏览器扩展
3. 检查代理设置

### 4. 防火墙或安全软件
系统防火墙可能阻止了本地连接。

**解决方法**：
1. 检查防火墙设置
2. 临时禁用防火墙测试
3. 允许 Node.js/Next.js 通过防火墙

## 🚀 立即尝试的解决方案

### 方案 1: 使用正确的URL

确保访问：
```
http://localhost:3000
```

**完整页面URL**：
- 首页: `http://localhost:3000/`
- 登录页: `http://localhost:3000/auth/signin`
- 定价页: `http://localhost:3000/pricing`

### 方案 2: 使用 127.0.0.1 代替 localhost

如果 `localhost` 不工作，尝试：
```
http://127.0.0.1:3000
```

### 方案 3: 重启服务器

如果以上都不行，重启服务器：

```bash
# 停止当前服务器（在运行服务器的终端按 Ctrl+C）
# 然后重新启动
cd /Users/p/Documents/GitHub/Sora-2-Ai
npm run dev
```

### 方案 4: 检查是否有其他服务占用端口

```bash
# 检查端口占用
lsof -ti:3000

# 如果显示进程，可能需要强制关闭
kill -9 <PID>
```

## 🔧 详细诊断步骤

### 步骤 1: 确认服务器正在运行

```bash
# 在终端运行
curl http://localhost:3000
```

如果返回 HTML 内容，说明服务器正常。

### 步骤 2: 检查浏览器开发者工具

1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签页的错误信息
3. 查看 Network 标签页，看请求是否被阻止

### 步骤 3: 尝试不同的浏览器

- Chrome
- Firefox
- Safari
- Edge

看看是否所有浏览器都有问题，还是特定浏览器的问题。

### 步骤 4: 检查系统代理设置

某些代理设置可能阻止本地连接：

**macOS**:
```bash
# 检查代理设置
scutil --proxy
```

**Windows**:
- 设置 > 网络和 Internet > 代理

## 📋 快速检查清单

- [ ] 确认访问的是 `http://localhost:3000`（不是 3001）
- [ ] 已尝试清除浏览器缓存
- [ ] 已尝试使用无痕模式
- [ ] 已尝试使用 `http://127.0.0.1:3000`
- [ ] 已检查浏览器扩展设置
- [ ] 已检查防火墙设置
- [ ] 已尝试不同的浏览器
- [ ] 服务器终端显示 "Ready" 状态

## 🎯 推荐的访问方式

**最简单的方法**：

1. 打开浏览器（建议使用 Chrome 或 Firefox）
2. 在地址栏输入：
   ```
   http://localhost:3000
   ```
3. 按 Enter

如果还是不行：

1. 使用无痕模式
2. 访问：
   ```
   http://127.0.0.1:3000
   ```

## ⚠️ 如果仍然无法访问

如果以上方法都不行，请检查：

1. **服务器终端输出**
   - 是否有错误信息？
   - 是否显示 "Ready in XXXms"？

2. **端口冲突**
   - 可能有其他应用占用了端口 3000
   - 尝试修改端口：
     ```bash
     PORT=3002 npm run dev
     ```
   - 然后访问 `http://localhost:3002`

3. **系统权限**
   - 某些系统可能需要管理员权限来监听端口

---

**重要提示**：从服务器日志看，服务器已经成功启动并监听在端口 3000。问题很可能是浏览器访问方式的问题。请按照上述步骤逐一尝试。
